!function(){"use strict";function t(t){var a=t[0]>.04045?Math.pow((t[0]+.055)/1.055,2.4):t[0]/12.92,n=t[1]>.04045?Math.pow((t[1]+.055)/1.055,2.4):t[1]/12.92,i=t[2]>.04045?Math.pow((t[2]+.055)/1.055,2.4):t[2]/12.92,e=.4124564*a+.3575761*n+.1804375*i,o=.2126729*a+.7151522*n+.072175*i,r=.0193339*a+.119192*n+.9503041*i;return e/=.95047,o/=1,r/=1.08883,e=e>.008856?Math.pow(e,1/3):7.787037*e+16/116,o=o>.008856?Math.pow(o,1/3):7.787037*o+16/116,r=r>.008856?Math.pow(r,1/3):7.787037*r+16/116,[116*o-16,500*(e-o),200*(o-r),t[3]]}function a(t){var a=(t[0]+16)/116,n=a+t[1]/500,i=a-t[2]/200;n=n>.206893034?n*n*n:(n-4/29)/7.787037,a=a>.206893034?a*a*a:(a-4/29)/7.787037,i=i>.206893034?i*i*i:(i-4/29)/7.787037,n=.95047*n,a=1*a,i=1.08883*i;var e=3.2404542*n+-1.5371385*a+i*-.4985314,o=n*-.969266+1.8760108*a+.041556*i,r=.0556434*n+a*-.2040259+1.0572252*i;return e=e>.00304?1.055*Math.pow(e,1/2.4)-.055:12.92*e,o=o>.00304?1.055*Math.pow(o,1/2.4)-.055:12.92*o,r=r>.00304?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[Math.max(Math.min(e,1),0),Math.max(Math.min(o,1),0),Math.max(Math.min(r,1),0),t[3]]}function n(t,a){return Math.sqrt((t[0]-a[0])*(t[0]-a[0])+(t[1]-a[1])*(t[1]-a[1])+(t[2]-a[2])*(t[2]-a[2])+(t[3]-a[3])*(t[3]-a[3]))}var i={},e=200,o=function(i){var o=[],r=_.map(i,function(a){return t([a[0]/255,a[1]/255,a[2]/255,a[3]/255])}),s=_.map(r,function(t,a,i){return a>0?n(t,i[a-1]):0}),h=_.reduce(s,function(t,a){return t+a},0);s=_.map(s,function(t){return t/h});for(var l,m,d,u=0,c=0,p=0;e>p;p++)l=p/(e-1),l>u+s[c+1]&&c+1<r.length-1&&(c+=1,u+=s[c]),m=(l-u)/s[c+1],d=a([r[c][0]+(r[c+1][0]-r[c][0])*m,r[c][1]+(r[c+1][1]-r[c][1])*m,r[c][2]+(r[c+1][2]-r[c][2])*m,r[c][3]+(r[c+1][3]-r[c][3])*m]),o.push([Math.round(255*d[0]),Math.round(255*d[1]),Math.round(255*d[2]),Math.round(255*d[3])]);return o},r=o([[4,32,64,80],[8,64,129,127],[8,104,172,255],[43,140,190,255],[78,179,211,255],[123,204,196,255],[168,221,181,255],[204,235,197,255],[224,243,219,255],[247,252,240,255]]),s=o([[64,0,19,80],[128,0,38,127],[189,0,38,255],[227,26,28,255],[252,78,42,255],[253,141,60,255],[254,178,76,255],[254,217,118,255],[255,237,160,255]]),h=o([[0,64,38,80],[0,90,50,127],[35,132,67,255],[65,171,93,255],[120,198,121,255],[173,221,142,255],[217,240,163,255],[247,252,185,255],[255,255,229,255]]),l=o([[38,26,64,80],[68,47,114,127],[225,43,2,255],[2,220,1,255],[255,210,2,255],[255,255,255,255]]),m=o([[0,22,64,80],[0,57,102,127],[49,61,102,255],[225,43,2,255],[255,210,2,255],[255,255,255,255]]),d=o([[0,0,0,127],[64,64,64,255],[255,255,255,255]]),u=o([[128,0,38,127],[189,0,38,255],[227,26,28,255],[252,78,42,255],[253,141,60,255]]),c=o([[0,64,38,80],[0,90,50,127],[35,132,67,255],[65,171,93,255],[120,198,121,255]]),p=function(t){return function(a,n){var i=t[Math.floor(a*(e-1))];return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n}};i.cool=p(r),i.hot=p(s),i.verdant=p(h),i.spectral=p(l),i.temperature=p(m),i.grey=p(d);var f=p(u),w=p(c);i.valence=function(t,a){return t>.5?f(2*(t-.5),a):w(2*t,a)},i.valence=function(t,a){return t>.5?w(2*(t-.5),a):.5>t?f(2*(.5-t),a):(a[0]=0,a[1]=0,a[2]=0,a[3]=0,a)},window.Color=i}(),function(){"use strict";var t={};t.twoSidedLinear=function(t,a,n,i,e){var o=a-t,r=t+n/100*o,s=t+i/100*o,h=Math.min(Math.max(r,e),s);return(h/Math.max(Math.abs(s),Math.abs(r))+1)/2},t.log10=function(t,a,n,i,e){var o=Math.log(e-t+1)/Math.log(a-t+1);return o=(o-n/100)/((i-n)/100),Math.min(Math.max(o,0),1)},window.Value=t}(),function(){L.BackdropLayer=L.TileLayer.extend({options:{noWrap:!0},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_createTile:function(){var t=L.DomUtil.create("div","leaflet-tile leaflet-tile-backdrop");return t.style.width=t.style.height=this.options.tileSize+"px",t.onselectstart=t.onmousemove=L.Util.falseFn,t},_loadTile:function(t,a){t._layer=this,t._tilePoint=a,this._tileOnLoad.call(t)}})}(),function(){"use strict";var t=10,a=10,n=24,i="log",e=10,o=20,r=function(t){var a=2*Math.PI,n=a*t.radius,i=t.arcLength>n/10?n/10:t.arcLength,e=i/t.radius,o=t.t+e;return o>a&&(o%=a,t.radius=t.radius+t.radiusInc),t.t=o,t.x=t.radius*Math.cos(o),t.y=t.radius*Math.sin(o),t},s=function(t,a){return 2*Math.abs(t.x-a.x)<t.width+a.width&&2*Math.abs(t.y-a.y)<t.height+a.height},h=function(t,a){return t.x+t.width/2>a.x+a.width/2||t.x-t.width/2<a.x-a.width/2||t.y+t.height/2>a.y+a.height/2||t.y-t.height/2<a.y-a.height/2},l=function(t,a,n,i){var e,o={x:t.x,y:t.y,height:a.height,width:a.width};for(e=0;e<n.length;e++)if(s(o,n[e]))return!0;return h(o,i)?(t.collisions++,t.arcLength=t.radius,!0):!1},m=function(t,a){var n,i={};return n=$('<div class="word-cloud-label-temp" style="font-size:'+a+'px;">'+t+"</div>"),$("body").append(n),i.width=n.outerWidth(),i.height=n.outerHeight(),n.remove(),i},d=function(t,a,n,i){var e=Math.max(Math.min(t,n),a);if("log"===i){var o=Math.log10(a||1),r=Math.log10(n||1),s=1/(r-o||1);return(Math.log10(e||1)-o)*s}var h=n-a;return(e-a)/h},u=function(t,a,n,i){i=i||{};var e=i.maxFontSize||22,o=i.minFontSize||12,r=d(t,a,n,i.type);return o+r*(e-o)},c=function(t,i,e,o,s,h){var c,p,f,w,x,g,y,v={width:256-2*a,height:256-2*n,x:0,y:0},L=[];for(t.sort(function(t,a){return a.count-t.count}),p=0;p<t.length;p++){f=t[p].text,w=t[p].count,g=u(w,i,e,{maxFontSize:h,minFontSize:s,type:o}),c=100*d(w,i,e,o),x=m(f,g),y={radius:1,radiusInc:5,arcLength:5,x:0,y:0,t:0,collisions:0};for(var M=t.length;y.collisions<M;)if(y=r(y),!l(y,x,L,v)){L.push({word:f,entry:t[p].entry,fontSize:g,percentLabel:10*Math.round(c/10),x:y.x,y:y.y,width:x.width,height:x.height});break}}return L},p=function(a,n,r,s){var h,l=i,m=e,d=o,u=$("<div></div>"),p=_.map(n,function(t,a){return{count:t,text:a}}),f=Math.min(p.length,t),w=[],x=r.min,g=r.max;if(0!==f){h=c(p,x,g,l,m,d);var y=$('<div class="count-summary"></div>');u=u.append(y),h.forEach(function(t){w.push(t.entry);var a=$('<div class="word-cloud-label word-cloud-label-'+t.percentLabel+'" style="font-size:'+t.fontSize+"px;left:"+(128+t.x-t.width/2)+"px;top:"+(128+t.y-t.height/2)+"px;width:"+t.width+"px;height:"+t.height+'px;"data-word="'+t.word+'">'+t.word+"</div>");t.word===s&&a.addClass("highlight"),u=u.append(a)}),a.html(u)}};L.WordcloudLayer=L.TileLayer.extend({options:{async:!0,tms:!0,unloadInvisibleTiles:!0,noWrap:!0},initialize:function(t,a){this._url=t,L.setOptions(this,a)},onAdd:function(t){var a=this;L.TileLayer.prototype.onAdd.call(this,t),t.on("zoomend",this.onZoom,this),t.on("click",this.onClick,this),$(this._container).on("mouseover",function(t){a.onHover(t)})},onRemove:function(t){t.off("zoomend",this.onZoom),t.off("click",this.onClick),$(this._container).off("mouseover"),this.highlight=null,L.TileLayer.prototype.onRemove.call(this,t)},onZoom:function(){$(this._container).removeClass("highlight"),this.highlight=null},onHover:function(t){var a=$(t.originalEvent.target);$(".word-cloud-label").removeClass("hover");var n=a.attr("data-word");n&&$(".word-cloud-label[data-word="+n+"]").addClass("hover")},onClick:function(t){var a=$(t.originalEvent.target);$(".word-cloud-label").removeClass("highlight");var n=a.attr("data-word");n?($(this._container).addClass("highlight"),$(".word-cloud-label[data-word="+n+"]").addClass("highlight"),this.highlight=n):($(this._container).removeClass("highlight"),this.highlight=null)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=L.DomUtil.create("div","leaflet-tile leaflet-wordcloud");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=L.Util.falseFn,t},_loadTile:function(t,a){t._layer=this,t._tilePoint=a,this._adjustTilePoint(a),this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(t,a,n){var i=this,e=this.getTileUrl(a);$.ajax(e).then(function(a){var e=$(t).empty();p(e,a,i.options.dataExtents[n],i.highlight),i.tileDrawn(t)})},tileDrawn:function(t){this._tileOnLoad.call(t)},refresh:function(){}})}(),function(){"use strict";var t=function(t,a){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(t){a(200==this.status?new Float64Array(this.response):null)},n.send()};L.BinaryTileLayer=L.TileLayer.Canvas.extend({options:{async:!0,tms:!0,noWrap:!0,transform:"log10",ramp:"temperature"},initialize:function(t,a){this._url=t,L.setOptions(this,a)},_loadTile:function(t,a){t._layer=this,t._tilePoint=a,this._adjustTilePoint(a),this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(a,n,i){var e=this,o=this.options,r=this.getTileUrl(n),s=Value[o.transform],h=Color[o.ramp],l=[];t(r,function(t){if(!t)return void e.tileDrawn(a);var n=a.getContext("2d"),r=n.getImageData(0,0,a.width,a.height),m=r.data,d=o.dataBounds[i];t.forEach(function(t,a){var n=s(d.min,d.max,0,100,t);l=h(n,l),m[4*a]=l[0],m[4*a+1]=l[1],m[4*a+2]=l[2],m[4*a+3]=l[3]}),n.putImageData(r,0,0),e.tileDrawn(a)})}})}();var map=new L.Map("map",{zoomControl:!1,center:[0,0],zoom:1,minZoom:0,maxZoom:7,scrollWheelZoom:!1});map.attributionControl.setPrefix('<a href="http://leafletjs.com" target="_top">Leaflet</a>');var zoomHome=L.Control.zoomHome();zoomHome.addTo(map),(new L.BackdropLayer).addTo(map);var attribution='<a href="http://unchartedsoftware.github.io/salt">Uncharted Salt</a>',tweetCount=new L.BinaryTileLayer("//s3.amazonaws.com/embed.pantera.io/strata/twitter-trump-all-count/{z}/{x}/{y}.bin",{attribution:attribution,tms:!0,transform:"log10",ramp:"temperature",zIndex:1,dataBounds:{0:{min:0,max:22265},1:{min:0,max:9568},2:{min:0,max:4420},3:{min:0,max:2164},4:{min:0,max:1103},5:{min:0,max:563},6:{min:0,max:278},7:{min:0,max:141}}});tweetCount.addTo(map);var tweetSentiment=new L.BinaryTileLayer("//s3.amazonaws.com/embed.pantera.io/strata/twitter-trump-all-sentiment/{z}/{x}/{y}.bin",{attribution:attribution,tms:!0,transform:"twoSidedLinear",ramp:"valence",zIndex:1,dataBounds:{0:{min:-1,max:1},1:{min:-1,max:1},2:{min:-1,max:1},3:{min:-1,max:1},4:{min:-1,max:1},5:{min:-1,max:1},6:{min:-1,max:1},7:{min:-1,max:1}}}),tweetMegynSentiment=new L.BinaryTileLayer("//s3.amazonaws.com/embed.pantera.io/strata/twitter-trump-megyn-sentiment/{z}/{x}/{y}.bin",{attribution:attribution,opacity:.8,tms:!0,transform:"twoSidedLinear",ramp:"valence",zIndex:1,dim:tweetSentiment,dataBounds:{0:{min:-1,max:1},1:{min:-1,max:1},2:{min:-1,max:1},3:{min:-1,max:1},4:{min:-1,max:1},5:{min:-1,max:1},6:{min:-1,max:1},7:{min:-1,max:1}}}),allWords=new L.WordcloudLayer("//s3.amazonaws.com/embed.pantera.io/strata/twitter-trump-all-hashtags/{z}/{x}/{y}.json",{attribution:attribution,zIndex:2,dataExtents:{0:{min:23544,max:176709},1:{min:1484,max:85857},2:{min:238,max:73063},3:{min:50,max:47282},4:{min:6,max:35496},5:{min:1,max:24751},6:{min:1,max:17776},7:{min:1,max:11995}}});allWords.addTo(map);var megynWords=new L.WordcloudLayer("//s3.amazonaws.com/embed.pantera.io/strata/twitter-trump-megyn-hash/{z}/{x}/{y}.json",{attribution:attribution,zIndex:2,dataExtents:{0:{min:100,max:1666},1:{min:2,max:986},2:{min:1,max:594},3:{min:1,max:478},4:{min:1,max:427},5:{min:1,max:178},6:{min:1,max:107},7:{min:1,max:95}}});map.on("layeradd",function(t){t.layer.options.dim&&t.layer.options.dim.setOpacity(.5)}),map.on("layerremove",function(t){t.layer.options.dim&&t.layer.options.dim.setOpacity(1)}),L.control.layers({},{"Trump Tweet Count":tweetCount,"Trump Sentiment":tweetSentiment,"Trump Hashtags":allWords,"Megyn Kelly Sentiment":tweetMegynSentiment,"Megyn Kelly Hashtags":megynWords},{collapsed:!1}).addTo(map);